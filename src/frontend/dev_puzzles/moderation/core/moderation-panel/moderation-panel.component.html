<div fxLayout="column" fxFlexFill style="height: 100%;">

    <!-- toolbar -->
    <div fxFlex="64px" style="overflow-y: hidden;">
        <mat-toolbar class="toolbar flexible mat-theme-indigo" color="primary" style="width: 100%;">
            <a href="/" title="Home" >
                <img alt="Home" src="/assets/images/colabo-logo-url-square.jpg" height="55px" style="margin-right: 7px; opacity: 0.9; border-radius: 7px;" />
            </a>  
            <span><a href="/rima-login"><img class='user-avatar' src = '{{userAvatar() | async}}'/></a></span> {{userName()}}
            <colabo-flow></colabo-flow>
            <!-- <div><button mat-raised-button (click)="submit()" [disabled]="!correctSelection()">Submit</button></div> -->
            <!-- <button color="primary" mat-raised-button (click)="openDialog()">Dialog</button> -->

        </mat-toolbar>
    </div>

    <div fxFlex style="/*background-color: yellow;*/ overflow-y:scroll;">
        <div *ngIf="isLoggedIn; else loggedOut">
            <div *ngIf="isModerator; else noModerator">
                <div style="margin: 15px;">

                    <p>
                        <a routerLink="/map">
                            <button mat-raised-button color="primary" style="width: 75%; max-width: 500px;">Map</button>
                        </a>
                    </p>
                    <p>
                        <a routerLink="/maps">
                            <button mat-raised-button color="primary" style="width: 75%; max-width: 500px;">Maps</button>
                        </a>
                    </p>
                    <p>
                        <a routerLink="/colaboflow-audits">
                            <button mat-raised-button color="primary" style="width: 75%; max-width: 500px;">ColaboFlow Audits</button>
                        </a>
                    </p>
                    <p>
                        <a routerLink="/participants">
                            <button mat-raised-button color="primary" style="width: 75%; max-width: 500px;">Paerticipants Display</button>
                        </a>
                    </p>

                    <h1>Moderation Panel</h1>
                    Active Map: {{activeMap}}
                    <colabo-flow-m></colabo-flow-m>
                </div>
                <app-insights></app-insights>
                <similarity></similarity>

                <topiChat-system-form></topiChat-system-form>
                <colaboFlow-topiChat-form></colaboFlow-topiChat-form>
            </div>
            <ng-template #noModerator>
                You have to be a moderator to access this page
            </ng-template>
        </div>
        <ng-template #loggedOut>
            <div style="margin: 15px;">
                <p>
                    To access this page you need:
                </p>
                <a routerLink="/rima-login">
                    <button mat-raised-button color="primary">Login</button>
                </a>
    
                <p>
                    or
                </p>
                <a routerLink="/rima-register">
                    <button mat-raised-button color="primary">Register</button>
                </a>
    
            </div>
        </ng-template>
    </div>
</div>